<div class="playground relative" #playground>
  <header class="playground__header flex items-center justify-between px-4 bg-white" [class]="themeFormControl.value">
    <div *ngIf="activeSnippet">
      <input type="text" name="snippet" class="px-2 py-1 rounded-md mb-1" id="snippet-name" autocomplete="off"
             [formControl]="snippetNameFormControl" #snippetNameRef (blur)="updateSnippetName()"
             (keyup.enter)="updateSnippetName()">
      <p class="playground__header-meta text-sm text-gray-500 ml-2">Last updated: {{activeSnippet?.updatedAt |
        date:'medium'}}</p>
    </div>

    <div class="grid grid-cols-6 gap-3">
      <button class="playground__header-button" (click)="save()" tippy="Save Snippet">
        <rmx-icon name="save-2-line" class="icon-lg"></rmx-icon>
      </button>
      <button class="playground__header-button" (click)="exportAsImage()" tippy="Export Image">
        <rmx-icon name="camera-3-line" class="icon-lg"></rmx-icon>
      </button>
      <button class="playground__header-button" tippy="Share">
        <rmx-icon name="share-circle-line" class="icon-lg"></rmx-icon>
      </button>
      <button class="playground__header-button" [cdkCopyToClipboard]="currentCode" tippy="Copy Code">
        <rmx-icon name="clipboard-line" class="icon-lg"></rmx-icon>
      </button>
      <button class="playground__header-button" (click)="toggleFullScreen()" [class.active]="fullScreen$ | async"
              tippy="Toggle Fullscreen">
        <rmx-icon [name]="(fullScreen$ | async) ? 'fullscreen-exit-line' : 'fullscreen-line'" class="icon-lg">
        </rmx-icon>
      </button>
      <button class="playground__header-button custom-color text-red-600" (click)="delete()" tippy="Delete Snippet">
        <rmx-icon name="delete-bin-2-line" class="icon-lg"></rmx-icon>
      </button>
    </div>
  </header>
  <div class="overflow-y-auto">
    <textarea #editor class="w-full h-full"></textarea>
  </div>
  <footer class="playground__footer flex items-center justify-between px-4 bg-white" [class]="themeFormControl.value">
    <div class="flex items-center">
      <rmx-icon class="mr-2 icon-lg" name="code-line"></rmx-icon>
      <ng-select [formControl]="languageFormControl" [clearable]="false" [searchable]="false" class="w-40">
        <ng-option *ngFor="let language of technologies" [value]="language.id">{{language.name}}</ng-option>
      </ng-select>
    </div>
    <div class="flex items-center">
      <rmx-icon class="mr-2 icon-lg" name="palette-line"></rmx-icon>
      <ng-select [formControl]="themeFormControl" [clearable]="false" [searchable]="false" class="w-40">
        <ng-option *ngFor="let theme of availableThemes" [value]="theme.value">{{theme.label}}</ng-option>
      </ng-select>
    </div>
  </footer>
  <div *ngIf="!activeSnippet" class="w-full h-full absolute top-0 left-0 bg-white grid place-items-center"
       [style.zIndex]="99">
    <div class="grid place-items-center">
      <img src="../../../../assets/images/programming.svg" alt="Select snippet" style="height: 200px;">
      <p class="text-gray-500 text-sm">Select a snippet to view</p>
    </div>
  </div>
</div>
